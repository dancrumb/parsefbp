!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.parsefbp=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b){return new Array(b+1).join(a)}function e(a){this.ix=0,this.sa=new Array,this.outStr="",this.start=0;for(var b=0;b<a.length;b++)this.sa.push(a[b])}b.exports=e,e.prototype.getOS=function(){var a=this.outStr;return this.outStr="",a},e.prototype.getCurSlice=function(){for(var a=0,b=this.sa.length,c=0;c<this.sa.length;c++)"\n"==this.sa[c]&&c<this.ix&&(a=c+1),"\n"==this.sa[c]&&c>this.ix&&b==this.sa.length&&(b=c);a=Math.max(this.ix-12,a),b=Math.min(this.ix+12,b),this.start=a;var d=this.sa.slice(a,b);return d.join("")},e.prototype.getCurPosn=function(){var a=this.ix-this.start,b=d(" ",a)+"^";return b},e.prototype.ta=function(a){if(this.ix>=this.sa.length)return!1;var b=/[A-Za-z]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},e.prototype.tn=function(a){if(this.ix>=this.sa.length)return!1;var b=/[0-9]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},e.prototype.tb=function(a){if(this.ix>=this.sa.length)return!1;var b=/\s/g,c=b.test(this.sa[this.ix]);return c?"\n"==this.sa[this.ix]?!1:(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},e.prototype.tc=function(a,b){return this.ix>=this.sa.length?!1:this.sa[this.ix]!=a?!1:(null==b?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=b.charAt(b.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=b.charAt(0)&&this.ix++),!0)},e.prototype.tv=function(a){if(this.ix>=this.sa.length)return!1;var b=/[^\~\`\!\@\#\$\%\^\&\*\(\)\_\-\+\=\<\,\>\.\?\/\:\;\"\'\{\[\}\]\|\\\s]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},e.prototype.copy=function(){return this.ix>=this.sa.length?!1:(this.outStr+=this.sa[this.ix],this.ix++,!0)},e.prototype.skip=function(){return this.ix>=this.sa.length?!1:(this.ix++,!0)},e.prototype.eof=function(){var a=this.ix>=this.sa.length;return a},e.prototype.strcmp=function(a){var b=this.sa.slice(this.ix,this.ix+a.length),c=b.join(""),d=c==a;return d}},{}],2:[function(a,b,c){"use strict";var d=a("babelparser"),e={parse:function(a){function b(a){for(n="",a.tn()&&l(a,"Process starting with numeric");;)if(!a.tv()){if(a.tc("_"))continue;if(a.tc("-","io")||a.tb("io")||a.tc(",","io")||a.tc("\n","io")||a.tc(";","io")||a.tc("(","io")||a.tc("?","io")||a.eof())break;if(x&&a.tc(":","io"))break;if(a.tc("\\","o")){a.copy()||l(a,"Escape char ends string");continue}l(a,"Invalid char in process name")}return n=a.getOS(),r[0]=n,!0}function c(a){for(var b=[];;){for(var c=new Array("","");;)if(!a.tv()){if(a.tc("=","o"))break;if(a.tc("\\","o")){a.copy()||l(a,"Escape char ends string");continue}l(a,"Invalid char in process name")}for(c[0]=a.getOS();;)if(!a.tv()){if(a.tc(",","o")||a.tc(")","io")){g(a);break}if(a.tc("\\","o")){a.copy()||l(a,"Escape char ends string");continue}l(a,"Invalid char in process name")}if(c[1]=a.getOS(),b.push(c),a.tc(")","o"))break}return r[2]=b,!0}function f(a){o="";var b=!0;for(a.tn()&&l(a,"Component name starts with numeric");;){if(a.tc(")","o")){o=a.getOS();break}if(a.tc(":","o")){if(o=a.getOS(),!c(a))return;break}if(a.tc("\n","o")||!a.copy()){b=!1;break}}return b||l(a,"Component name contains end of line"),r[1]=o,q.push(r),r=new Array("","",""),!0}function g(a){for(;;)if(!a.tb("o")&&!a.tc("\r","o")){if(!a.tc("#","o"))return!0;for(;;){if(a.tc("\n","io"))break;if(!a.skip())break}}}function h(a){var b,c=m?"input":"output";for(a.tn()&&l(a,"Port starting with numeric");;)if(!(a.ta()||a.tn()||a.tc("_")||a.tc("."))){b=a.getOS(),0===b.length&&l(a,"Missing "+c+" port");break}if(a.tc("["))for(;;){if(a.tc("]")){b+=a.getOS();break}a.tn()||l(a,"Non-numeric in aray port index")}return m?u=b:v=b,!0}function i(a){if(!a.tc("-","o"))return!1;if(a.tc(">","o")||l(a,"Unfinished arrow"),g(a),a.tc("(","o"))for(;;){if(a.tc(")","o")){p=a.getOS();break}a.tn()||l(a,"Non-numeric in capacity")}return!0}function j(){this.x=0,this.y=0}function k(){var a,b,c,d,e,f={};for(""===w&&(w="MyDiagram"),f.properties={name:w},f.processes={},f.connections=[],d=0;d<q.length;d++){n=q[d][0],o=q[d][1];var g=q[d][2];if(""!==o){for(var h=new j,i=0;i<g.length;i++)"x"==g[i][0]&&(h.x=g[i][1]),"y"==g[i][0]&&(h.y=g[i][1]);f.processes[n]={component:o,metadata:h}}}for(d=0;d<s.length;d++)if(b=s[d][0],c=s[d][1],""!==c){v=s[d][2],u=s[d][3],e=s[d][4];var k,l,m="",p="";""!==v&&(k=v.indexOf("["),k>-1&&(l=v.indexOf("]"),m=v.substring(k+1,l),v=v.substring(0,k))),k=u.indexOf("["),k>-1&&(l=u.indexOf("]"),p=u.substring(k+1,l),u=u.substring(0,k)),"'"!==b.charAt(0)?(a={src:{process:b,port:v}},""!==m&&(a.src.index=m)):a={data:b},a.tgt={process:c,port:u},""!==p&&(a.tgt.index=p),f.connections.push(a)}return f}function l(a,b){throw new e.SyntaxError(a,b,k())}for(var m=!1,n="",o="",p=0,q=[],r=new Array("","",""),s=[],t=new Array("","","","",0),u="",v="",w="",x=!0,y=new d(a);;)if(y.strcmp("INPORT=")||y.strcmp("OUTPORT="))for(;;){if(y.tc("\n","o"))break;if(!y.skip())break}else if(y.tc("\n","o"))m=!1;else{if(g(y),y.tc("'")){for(;;){if(y.tc("'"))break;!y.tc("\n","o")&&y.copy()||l(y,"Invalid IIP")}var z=y.getOS();t[0]=z,g(y),i(y)||l(y,"IIP not followed by arrow")}else{if(!b(y))return;if(g(y),x&&y.tc(":","o")){w=n,x=!1,n="";continue}if(y.tc("(","o")){if(!f(y))return;g(y),y.tc("?","o")}else if(y.tc("?","o"));else if(n.length>0){for(var A=!1,B=0;B<q.length;B++)if(q[B][0]===n){A=!0;break}A||l(y,"No component name specified for: "+n)}x=!1;var C=m?1:0;if(t[C]=n,g(y),m&&(t[4]=p,p=0,s.push(t),t=new Array(n,"","","",0),n="",m=!1),g(y),y.tc(",","o")){g(y);continue}if(y.tc(";","o")||y.eof())return s.push(t),k();if(y.tc("\n","o"))continue;if(!h(y))return;if(g(y),t[2]=v,!i(y))return}if(m=!0,g(y),!h(y))return;t[3]=u}}};e.SyntaxError=function(a,b,c){this.curSlice=a.getCurSlice(),this.curPosn=a.getCurPosn(),this.message="Syntax error: "+b+"\nCurrent slice......: "+this.curSlice+"\nCurrent position...: "+this.curPosn+"\n"+JSON.stringify(c)},e.SyntaxError.prototype=Error.prototype,e.SyntaxError.prototype.name="SyntaxError",b.exports=e.parse},{babelparser:1}]},{},[2])(2)});