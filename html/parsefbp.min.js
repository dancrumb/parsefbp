!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.parsefbp=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){return new Array(b+1).join(a)}function d(a){this.ix=0,this.sa=new Array,this.outStr="",this.start=0;for(var b=0;b<a.length;b++)this.sa.push(a[b])}b.exports=d,d.prototype.getOS=function(){var a=this.outStr;return this.outStr="",a},d.prototype.getCurSlice=function(){for(var a=0,b=this.sa.length,c=0;c<this.sa.length;c++)"\n"==this.sa[c]&&c<this.ix&&(a=c+1),"\n"==this.sa[c]&&c>this.ix&&b==this.sa.length&&(b=c);a=Math.max(this.ix-12,a),b=Math.min(this.ix+12,b),this.start=a;var d=this.sa.slice(a,b);return d.join("")},d.prototype.getCurPosn=function(){var a=this.ix-this.start,b=c(" ",a)+"^";return b},d.prototype.ta=function(a){if(this.ix>=this.sa.length)return!1;var b=/[A-Za-z]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.tn=function(a){if(this.ix>=this.sa.length)return!1;var b=/[0-9]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.tb=function(a){if(this.ix>=this.sa.length)return!1;var b=/\s/g,c=b.test(this.sa[this.ix]);return c?"\n"==this.sa[this.ix]?!1:(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.tc=function(a,b){return this.ix>=this.sa.length?!1:this.sa[this.ix]!=a?!1:(null==b?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=b.charAt(b.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=b.charAt(0)&&this.ix++),!0)},d.prototype.tv=function(a){if(this.ix>=this.sa.length)return!1;var b=/[^\~\`\!\@\#\$\%\^\&\*\(\)\_\-\+\=\<\,\>\.\?\/\:\;\"\'\{\[\}\]\|\\\s]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.copy=function(){return this.ix>=this.sa.length?!1:(this.outStr+=this.sa[this.ix],this.ix++,!0)},d.prototype.skip=function(){return this.ix>=this.sa.length?!1:(this.ix++,!0)},d.prototype.eof=function(){var a=this.ix>=this.sa.length;return a},d.prototype.strcmp=function(a){var b=this.sa.slice(this.ix,this.ix+a.length),c=b.join(""),d=c==a;return d}},{}],2:[function(a,b){"use strict";var c=a("babelparser"),d={parse:function(a){function b(a){for(m="",a.tn()&&i(a,"Process starting with numeric");;)if(!a.tv()){if(a.tc("_"))continue;if(a.tc("-","io")||a.tb("io")||a.tc(",","io")||a.tc("\n","io")||a.tc(";","io")||a.tc("?","io")||a.eof())break;if(v&&a.tc(":","io"))break;if(a.tc("\\","o")){a.copy()||i(a,"Escape char ends string");continue}if(a.tc("(","o")){l=a.getOS();for(var b=!0;;){if(a.tc(")","o")){m=a.getOS();break}if(a.tc("\n","o")||!a.copy()){b=!1;break}}return b||i(a,"Component name contains end of line"),p[0]=l,p[1]=m,o.push(p),p=new Array("",""),e(a),a.tc("?","o"),!0}i(a,"Invalid char in process name")}return l=a.getOS(),e(a),a.tc("?","o"),!0}function e(a){for(;;)if(!a.tb("o")&&!a.tc("\r","o")){if(!a.tc("#","o"))return!0;for(;;){if(a.tc("\n","io"))break;if(!a.skip())break}}}function f(a){var b,c=j?"input":"output";for(a.tn()&&i(a,"Port starting with numeric");;)if(!(a.ta()||a.tn()||a.tc("_")||a.tc("."))){b=a.getOS(),0===b.length&&i(a,"Missing "+c+" port");break}if(a.tc("["))for(;;){if(a.tc("]")){b+=a.getOS();break}a.tn()||i(a,"Non-numeric in aray port index")}return k?s=b:t=b,!0}function g(a){if(!a.tc("-","o"))return!1;if(a.tc(">","o")||i(a,"Unfinished arrow"),e(a),a.tc("(","o"))for(;;){if(a.tc(")","o")){n=a.getOS();break}a.tn()||i(a,"Non-numeric in capacity")}return!0}function h(){var a,b,c,d,e,f={};for(""===u&&(u="MyDiagram"),f.properties={name:u},f.processes={},f.connections=[],d=0;d<o.length;d++)l=o[d][0],m=o[d][1],""!==m&&(f.processes[l]={component:m});for(d=0;d<q.length;d++)if(b=q[d][0],c=q[d][1],""!==c){t=q[d][2],s=q[d][3],e=q[d][4];var g,h,i="",j="";""!==t&&(g=t.indexOf("["),g>-1&&(h=t.indexOf("]"),i=t.substring(g+1,h),t=t.substring(0,g))),g=s.indexOf("["),g>-1&&(h=s.indexOf("]"),j=s.substring(g+1,h),s=s.substring(0,g)),"'"!==b.charAt(0)?(a={src:{process:b,port:t}},""!==i&&(a.src.index=i)):a={data:b},a.tgt={process:c,port:s},""!==j&&(a.tgt.index=j),f.connections.push(a)}return f}function i(a,b){throw new d.SyntaxError(a,b,h())}for(var j,k=!1,l="",m="",n=0,o=[],p=new Array("",""),q=[],r=new Array("","","","",0),s="",t="",u="",v=!0,w=new c(a);;)if(w.strcmp("INPORT=")||w.strcmp("OUTPORT="))for(;;){if(w.tc("\n","o"))break;if(!w.skip())break}else if(w.tc("\n","o"))k=!1;else{if(e(w),w.tc("'")){for(;;){if(w.tc("'"))break;(w.tc("\n","o")||!w.copy())&&i(w,"Invalid IIP")}var x=w.getOS();r[0]=x,e(w),g(w)||i(w,"IIP not followed by arrow")}else{if(!b(w))return;if(e(w),v&&w.tc(":","o")){u=l,v=!1,l="";continue}if(l.length>0){for(var y=!1,z=0;z<o.length;z++)if(o[z][0]===l){y=!0;break}y||i(w,"No component name specified for: "+l)}v=!1;var A=k?1:0;if(r[A]=l,k&&(r[4]=n,n=0,q.push(r),r=new Array(l,"","","",0)),l="",e(w),k=!1,w.tc(",","o")){e(w);continue}if(w.tc("\n","o"))continue;if(w.tc(";","o")||w.eof())return q.push(r),h();if(!f(w))return;if(e(w),r[2]=t,!g(w))return}if(k=!0,e(w),!f(w))return;r[3]=s}}};d.SyntaxError=function(a,b,c){this.curSlice=a.getCurSlice(),this.curPosn=a.getCurPosn(),this.message="Syntax error: "+b+"\nCurrent slice......: "+this.curSlice+"\nCurrent position...: "+this.curPosn+"\n"+JSON.stringify(c)},d.SyntaxError.prototype=Error.prototype,d.SyntaxError.prototype.name="SyntaxError",b.exports=d.parse},{babelparser:1}]},{},[2])(2)});