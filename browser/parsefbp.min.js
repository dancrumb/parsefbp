!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.parsefbp=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){return new Array(b+1).join(a)}function d(a){this.ix=0,this.sa=new Array,this.outStr="",this.start=0;for(var b=0;b<a.length;b++)this.sa.push(a[b]);d.prototype.getOS=function(){var a=this.outStr;return this.outStr="",a},d.prototype.getCurSlice=function(){var a;this.start=Math.max(this.ix-12,0),a=Math.min(this.ix+12,this.sa.length);var b=this.sa.slice(this.start,a);return b.join("").replace(/\s/g,".")},d.prototype.getCurPosn=function(){var a=this.ix-this.start,b=c(".",a)+"^";return b},d.prototype.ta=function(a){if(this.ix>=this.sa.length)return!1;var b=/[A-Za-z]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.tn=function(a){if(this.ix>=this.sa.length)return!1;var b=/[0-9]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.tb=function(a){if(this.ix>=this.sa.length)return!1;var b=/\s/g,c=b.test(this.sa[this.ix]);return c?"\n"==this.sa[this.ix]?!1:(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.tc=function(a,b){return this.ix>=this.sa.length?!1:this.sa[this.ix]!=a?!1:(null==b?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=b.charAt(b.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=b.charAt(0)&&this.ix++),!0)},d.prototype.tv=function(a){if(this.ix>=this.sa.length)return!1;var b=/[^\~\`\!\@\#\$\%\^\&\*\(\)\_\-\+\=\<\,\>\.\?\/\:\;\"\'\{\[\}\]\|\\\s]/g,c=b.test(this.sa[this.ix]);return c?(null==a?(this.outStr+=this.sa[this.ix],this.ix++):("o"!=a.charAt(a.length-1)&&(this.outStr+=this.sa[this.ix]),"i"!=a.charAt(0)&&this.ix++),!0):!1},d.prototype.copy=function(){return this.ix>=this.sa.length?!1:(this.outStr+=this.sa[this.ix],this.ix++,!0)},d.prototype.skip=function(){return this.ix>=this.sa.length?!1:(this.ix++,!0)},d.prototype.eof=function(){var a=this.ix>=this.sa.length;return a},d.prototype.strcmp=function(a){var b=this.sa.slice(this.ix,this.ix+a.length),c=b.join(""),d=c==a;return d}}b.exports=d},{}],2:[function(a,b){"use strict";function c(a,b){throw new e.SyntaxError(a,b)}var d=a("babelparser"),e={parse:function(a){function b(a){for(l="",a.tn()&&c(a,"Process starting with numeric");;)if(!a.tv()){if(a.tc("_"))continue;if(a.tc("-","io")||a.tb("io")||a.tc(",","io")||a.tc("\n","io")||a.tc(";","io")||a.tc("?","io")||a.eof())break;if(u&&a.tc(":","io"))break;if(a.tc("\\","o")){a.copy()||c(a,"Escape char ends string");continue}if(a.tc("(","o")){k=a.getOS();for(var b=!0;;){if(a.tc(")","o")){l=a.getOS();break}if(a.tc("\n","o")||!a.copy()){b=!1;break}}return b||c(a,"Component name contains end of line"),o[0]=k,o[1]=l,n.push(o),o=new Array("",""),e(a),a.tc("?","o"),!0}c(a,"Invalid char in process name")}return k=a.getOS(),e(a),a.tc("?","o"),!0}function e(a){for(;;)if(!a.tb("o")&&!a.tc("\r","o")){if(!a.tc("#","o"))return!0;for(;;){if(a.tc("\n","io"))break;if(!a.skip())break}}}function f(a){var b,d=i?"input":"output";for(a.tn()&&c(a,"Port starting with numeric");;)if(!(a.ta()||a.tn()||a.tc("_")||a.tc("."))){b=a.getOS(),0===b.length&&c(a,"Missing "+d+" port");break}if(a.tc("["))for(;;){if(a.tc("]")){b+=a.getOS();break}a.tn()||c(a,"Non-numeric in aray port index")}return j?r=b:s=b,!0}function g(a){if(!a.tc("-","o"))return!1;if(a.tc(">","o")||c(a,"Unfinished arrow"),e(a),a.tc("(","o"))for(;;){if(a.tc(")","o")){m=a.getOS();break}a.tn()||c(a,"Non-numeric in capacity")}return!0}function h(){var a,b,c,d,e,f={};for(""===t&&(t="MyDiagram"),f.properties={name:t},f.processes={},f.connections=[],d=0;d<n.length;d++)k=n[d][0],l=n[d][1],""!==l&&(f.processes[k]={component:l});for(d=0;d<p.length;d++)if(b=p[d][0],c=p[d][1],""!==c){s=p[d][2],r=p[d][3],e=p[d][4];var g,h,i="",j="";""!==s&&(g=s.indexOf("["),g>-1&&(h=s.indexOf("]"),i=s.substring(g+1,h),s=s.substring(0,g))),g=r.indexOf("["),g>-1&&(h=r.indexOf("]"),j=r.substring(g+1,h),r=r.substring(0,g)),"'"!==b.charAt(0)?(a={src:{process:b,port:s}},""!==i&&(a.src.index=i)):a={data:b},a.tgt={process:c,port:r},""!==j&&(a.tgt.index=j),f.connections.push(a)}return f}for(var i,j=!1,k="",l="",m=0,n=[],o=new Array("",""),p=[],q=new Array("","","","",0),r="",s="",t="",u=!0,v=new d(a);;)if(v.strcmp("INPORT=")||v.strcmp("OUTPORT="))for(;;){if(v.tc("\n","o"))break;if(!v.skip())break}else if(v.tc("\n","o"))j=!1;else{if(e(v),v.tc("'")){for(;;){if(v.tc("'"))break;(v.tc("\n","o")||!v.copy())&&c(v,"Invalid IIP")}var w=v.getOS();q[0]=w,e(v),g(v)||c(v,"IIP not followed by arrow")}else{if(!b(v))return;if(e(v),u&&v.tc(":","o")){t=k,u=!1,k="";continue}if(k.length>0){for(var x=!1,y=0;y<n.length;y++)if(n[y][0]===k){x=!0;break}x||c(v,"No component name specified for: "+k)}u=!1;var z=j?1:0;if(q[z]=k,j&&(q[4]=m,m=0,p.push(q),q=new Array(k,"","","",0)),k="",e(v),j=!1,v.tc(",","o")){e(v);continue}if(v.tc("\n","o"))continue;if(v.tc(";","o")||v.eof())return p.push(q),h();if(!f(v))return;if(e(v),q[2]=s,!g(v))return}if(j=!0,e(v),!f(v))return;q[3]=r}}};e.SyntaxError=function(a,b){this.curSlice=a.getCurSlice(),this.curPosn=a.getCurPosn(),this.result=this.finish(),this.message="Syntax error: "+b+"\nCurrent slice......: "+this.curSlice+"\nCurrent position...: "+this.curPosn+"\n"+JSON.stringify(this.result)},e.SyntaxError.prototype=Error.prototype,e.SyntaxError.prototype.name="SyntaxError",b.exports=e.parse},{babelparser:1}]},{},[2])(2)});